<div class="navs">
    <span *ngIf="currentApp && tabsInternal && tabsInternal.length > 0">
        <div *ngFor="let tab of tabsInternal" 
             [style.display]="tab.appId !== currentApp.id ? 'none': ''"
             class="tab-on-nav"
             [title]="tab.title"
             [class.active]="currentTabInternal && tab.id === currentTabInternal.id"
             (click)="onGotoTab.emit(tab)"
             (contextmenu)="onContextMenu.emit(tab)"
             (mouseup)="onMouseUp($event, tab)"
             [style.width]="getTabWidth()">
            <button class="tab-close" 
                    (click)="$event.stopPropagation(); onCloseTab.emit(tab)"
                    title="Close tab">
                <i class="bi bi-x"></i>
            </button>
            <span class="tab-title">{{tab.title || 'New Tab'}}</span>
        </div>
    </span>
    
    <div class="nav-actions">
        <button class="nav-button" (click)="onReload()" [disabled]="!currentApp?.id" title="Reload">
            <i class="bi bi-arrow-clockwise"></i>
        </button>
        <button class="nav-button" (click)="onBack()" [disabled]="!currentApp?.id" title="Back">
            <i class="bi bi-chevron-left"></i>
        </button>
        <button class="nav-button" (click)="onNext()" [disabled]="!currentApp?.id" title="Forward">
            <i class="bi bi-chevron-right"></i>
        </button>
        
        <div class="dropdown" *ngIf="currentApp?.id">
            <button class="nav-button recent-button" 
                    type="button" 
                    data-bs-toggle="dropdown" 
                    aria-expanded="false"
                    (click)="updateHistories()"
                    title="Recent">
                <span>Recent</span>
                <i class="bi bi-chevron-down"></i>
            </button>
            <ul class="dropdown-menu">
                <li *ngFor="let item of filteredHistories">
                    <a class="dropdown-item recent-item" 
                       (click)="selectHistoryItem(item)" 
                       [title]="item.title || item.link">
                        <div class="recent-item-title">{{item.title || 'Untitled'}}</div>
                        <div class="recent-item-link" [title]="item.link">{{getShortenedUrl(item.link)}}</div>
                    </a>
                </li>
                <li *ngIf="filteredHistories.length === 0">
                    <span class="dropdown-item disabled">No recent items</span>
                </li>
            </ul>
        </div>

        <div class="dropdown" *ngIf="currentApp?.id">
            <button class="nav-button zoom-button" 
                    type="button" 
                    data-bs-toggle="dropdown" 
                    aria-expanded="false"
                    title="Zoom">
                {{(currentZoom * 100).toFixed(0)}}%
                <i class="bi bi-chevron-down"></i>
            </button>
            <ul class="dropdown-menu zoom-menu">
                <li>
                    <a class="dropdown-item zoom-item" (click)="onZoomIn($event)">
                        <i class="bi bi-search"></i>
                        Zoom in +5%
                    </a>
                </li>
                <li>
                    <a class="dropdown-item zoom-item" (click)="onZoomOut($event)">
                        <i class="bi bi-search"></i>
                        Zoom out -5%
                    </a>
                </li>
                <li>
                    <a class="dropdown-item zoom-item" (click)="onZoomReset($event)">
                        <i class="bi bi-arrow-counterclockwise"></i>
                        Reset zoom 100%
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>