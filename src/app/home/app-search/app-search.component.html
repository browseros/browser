<div class="search-modal" [class.show]="isVisible">
    <div class="search-container">
        <div class="search-header">
            <div class="search-input-wrapper">
                <i class="bi bi-search"></i>
                <input #searchInput
                       type="text"
                       class="search-input"
                       [(ngModel)]="appSearch"
                       (keyup)="keyUp($event)"
                       (input)="onSearchChanged()"
                       placeholder="Search URL or App">
            </div>
        </div>

        <div class="search-results">
            <!-- Google Search -->
            <div class="search-section" *ngIf="appSearch">
                <div class="search-item" [class.active]="isCurrentSelectedSearchItem(0)" (click)="doGoogleSearch(appSearch)">
                    <i class="bi bi-google search-item-icon"></i>
                    <div class="search-item-content">
                        <div class="search-item-title">Search Google for "{{appSearch}}"</div>
                    </div>
                </div>
            </div>

            <!-- Search Suggestions -->
            <div class="search-section" *ngIf="suggestions.length > 0">
                <div class="search-section-title">Suggestions</div>
                <div class="search-item" *ngFor="let suggestion of suggestions; let i = index"
                     [class.active]="isCurrentSelectedSearchItem(i + 1)"
                     (click)="doGoogleSearch(suggestion.key)">
                    <i class="bi bi-search search-item-icon"></i>
                    <div class="search-item-content">
                        <div class="search-item-title">{{suggestion.key}}</div>
                    </div>
                </div>
            </div>

            <!-- History Results -->
            <div class="search-section" *ngIf="historiesSearched.length > 0">
                <div class="search-section-title">History</div>
                <div class="search-item" *ngFor="let item of historiesSearched"
                     (click)="selectHistoryItem(item)">
                    <img [src]="item.icon" *ngIf="item.icon" class="search-item-icon" alt="">
                    <i *ngIf="!item.icon" class="bi bi-clock-history search-item-icon"></i>
                    <div class="search-item-content">
                        <div class="search-item-title">{{item.title}}</div>
                        <div class="search-item-url">{{item.link}}</div>
                    </div>
                </div>
            </div>

            <!-- Top Apps -->
            <div class="search-section" *ngIf="!appSearch && topApps.length > 0">
                <div class="search-section-title">Top Apps</div>
                <div class="search-item" *ngFor="let app of topApps"
                     (click)="selectHistoryItem(app)">
                    <img [src]="app.icon" *ngIf="app.icon" class="search-item-icon" alt="">
                    <i *ngIf="!app.icon" class="bi bi-window search-item-icon"></i>
                    <div class="search-item-content">
                        <div class="search-item-title">{{app.title}}</div>
                        <div class="search-item-url">{{app.link}}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
