<div class="webview-container" [class.ai-assistant-open]="isAIAssistantOpen">
  <div *ngFor="let tabId of tabIdsInternal" [style.width.px]="screenWidth">
    <div [hidden]="!currentTabInternal || tabId !== currentTabInternal.id" [style.width.px]="screenWidth">
      <webview
        #webview
        [id]="'webview-' + tabId"
        [style.height.px]="screenHeight"
        [style.width.px]="screenWidth"
        [attr.src]="getTabUrl(tabId)"
        allowpopups
        nodeintegration
        webpreferences="contextIsolation=no, nodeIntegration=yes"
        partition="persist:main"
        (dom-ready)="onDomReady.emit({eventValue: null, eventName: 'domready', tabId: tabId, app: null})"
        (page-title-updated)="handleTitleUpdated($event)"
        (page-favicon-updated)="handleFaviconUpdated($event)"
        (did-navigate)="handleNavigate($event)"
        (did-get-redirect-request)="handleRedirectRequest($event)"
        (new-window)="handleNewWindow($event)"
        (context-menu)="handleContextMenu($event)"
        (clicked)="onClicked.emit($event)">
      </webview>
    </div>
  </div>
</div>